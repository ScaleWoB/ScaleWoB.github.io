echo "ğŸ¨ Running code formatting and quality checks..."

# First, format the code with Prettier
echo "ğŸ“ Formatting code with Prettier..."
npm run format

# Then run ESLint with auto-fix
echo "ğŸ” Running ESLint with auto-fix..."
npm run lint:fix

# Check if there are any remaining ESLint errors after auto-fix
echo "âœ… Checking for remaining ESLint issues..."
npm run lint

# If ESLint still finds errors, prevent the commit
if [ $? -ne 0 ]; then
    echo ""
    echo "âŒ ESLint found errors that couldn't be auto-fixed. Please fix the linting issues before committing."
    echo ""
    echo "You can review the issues by running:"
    echo "  npm run lint"
    echo ""
    echo "Or try to auto-fix with:"
    echo "  npm run lint:fix"
    echo ""
    echo "Files have been formatted with Prettier. Review the changes and commit again."
    echo ""
    exit 1
fi

echo "âœ… Code formatting and quality checks passed!"